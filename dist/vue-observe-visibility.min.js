var VueObserveVisibility=function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var n=function(){function e(t,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.observer=null,this.frozen=!1,this.createObserver(r,i)}var t,n,o;return t=e,(n=[{key:"createObserver",value:function(e,t){var r,n,o,s,l,a,c,u=this;(this.observer&&this.destroyObserver(),this.frozen)||(this.options="function"==typeof(r=e)?{callback:r}:r,this.callback=function(e,t){u.options.callback(e,t),e&&u.options.once&&(u.frozen=!0,u.destroyObserver())},this.callback&&this.options.throttle&&(this.callback=(n=this.callback,o=this.options.throttle,(c=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),c=1;c<t;c++)r[c-1]=arguments[c];a=r,s&&e===l||(l=e,clearTimeout(s),s=setTimeout(function(){n.apply(void 0,[e].concat(i(a))),s=0},o))})._clear=function(){clearTimeout(s)},c)),this.oldResult=void 0,this.observer=new IntersectionObserver(function(e){var t=e[0];if(u.callback){var r=t.isIntersecting&&t.intersectionRatio>=u.threshold;if(r===u.oldResult)return;u.oldResult=r,u.callback(r,t)}},this.options.intersection),t.context.$nextTick(function(){u.observer&&u.observer.observe(u.el)}))}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&this.options.intersection.threshold||0}}])&&r(t.prototype,n),o&&r(t,o),e}();function o(e,t,r){var i=t.value;if(i)if("undefined"==typeof IntersectionObserver)console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var o=new n(e,i,r);e._vue_visibilityState=o}}function s(e){var t=e._vue_visibilityState;t&&(t.destroyObserver(),delete e._vue_visibilityState)}var l={bind:o,update:function(e,r,i){var n=r.value;if(!function e(r,i){if(r===i)return!0;if("object"===t(r)){for(var n in r)if(!e(r[n],i[n]))return!1;return!0}return!1}(n,r.oldValue)){var l=e._vue_visibilityState;n?l?l.createObserver(n,i):o(e,{value:n},i):s(e)}},unbind:s};function a(e){e.directive("observe-visibility",l)}var c={version:"0.4.4",install:a},u=null;return"undefined"!=typeof window?u=window.Vue:"undefined"!=typeof global&&(u=global.Vue),u&&u.use(c),e.ObserveVisibility=l,e.default=c,e.install=a,e}({});
