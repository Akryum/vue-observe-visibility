var VueObserveVisibility=function(e){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=(function(){function e(e){this.value=e}function t(t){var n,r;function i(n,r){try{var s=t[n](r),l=s.value;l instanceof e?Promise.resolve(l.value).then(function(e){i("next",e)},function(e){i("throw",e)}):o(s.done?"return":"normal",s.value)}catch(e){o("throw",e)}}function o(e,t){switch(e){case"return":n.resolve({value:t,done:!0});break;case"throw":n.reject(t);break;default:n.resolve({value:t,done:!1})}(n=n.next)?i(n.key,n.arg):r=null}this._invoke=function(e,t){return new Promise(function(o,s){var l={key:e,arg:t,resolve:o,reject:s,next:null};r?r=r.next=l:(n=r=l,i(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)};var o=function(){function e(t,r,i){n(this,e),this.el=t,this.observer=null,this.frozen=!1,this.createObserver(r,i)}return r(e,[{key:"createObserver",value:function(e,t){var n,r,o,s,l,a,u,c=this;(this.observer&&this.destroyObserver(),this.frozen)||(this.options="function"==typeof(n=e)?{callback:n}:n,this.callback=this.options.callback,this.callback&&this.options.throttle&&(this.callback=(r=this.callback,o=this.options.throttle,s=void 0,l=void 0,a=void 0,(u=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),u=1;u<t;u++)n[u-1]=arguments[u];a=n,s&&e===l||(l=e,clearTimeout(s),s=setTimeout(function(){r.apply(void 0,[e].concat(i(a))),s=0},o))})._clear=function(){clearTimeout(s)},u)),this.oldResult=void 0,this.observer=new IntersectionObserver(function(e){var t=e[0];if(c.callback){var n=t.isIntersecting&&t.intersectionRatio>=c.threshold;if(n===c.oldResult)return;c.oldResult=n,c.callback(n,t),n&&c.options.once&&(c.frozen=!0,c.destroyObserver())}},this.options.intersection),t.context.$nextTick(function(){c.observer.observe(c.el)}))}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&this.options.intersection.threshold||0}}]),e}();function s(e,t,n){var r=t.value;if("undefined"==typeof IntersectionObserver)console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var i=new o(e,r,n);e._vue_visibilityState=i}}var l={bind:s,update:function(e,n,r){var i=n.value;if(!function e(n,r){if(n===r)return!0;if("object"===(void 0===n?"undefined":t(n))){for(var i in n)if(!e(n[i],r[i]))return!1;return!0}return!1}(i,n.oldValue)){var o=e._vue_visibilityState;o?o.createObserver(i,r):s(e,{value:i},r)}},unbind:function(e){var t=e._vue_visibilityState;t&&(t.destroyObserver(),delete e._vue_visibilityState)}};function a(e){e.directive("observe-visibility",l)}var u={version:"0.4.3",install:a},c=null;return"undefined"!=typeof window?c=window.Vue:"undefined"!=typeof global&&(c=global.Vue),c&&c.use(u),e.install=a,e.ObserveVisibility=l,e.default=u,e}({});
